---
title: "vizualization-code"
author: "Pence"
date: "7/7/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
councildf<-group_by(post_2013_permits, CouncilDst) %>%
summarise(tot_new = sum(ClassANet))
qplot(x = CouncilDst, y = tot_new, data = councildf, geom = "col")
```

```{r}
councilmemberdf<-group_by(permits_by_councilor, council.member, CouncilDst) %>%
summarise(tot_new = sum(ClassANet))
```

Renata merge if I have to map
```{r}
left_join(post_2013_permits_dropped_splits_years_fixed, post_2013_councilmembers, by = c("CouncilDst" = "district")) %>% 
    filter(pmap_lgl(list(PermitYear, start.date, end.date), ~ ..1 %within% interval(..2, ..3)))
```

```{r}
permits_sf <- st_as_sf(permits_joined, coords = c("Longitude", "Latitude"), crs = 4326)

permits_sf_ny <- st_transform(permits_sf, 2263)

ggplot(permits_sf_ny) +
  geom_sf() +
  coord_sf(crs = 3587)

tmap_mode("view")
tm_shape(permits_sf_ny)+
tm_bubbles(col = "red",
           alpha= 0.5,
           size = "ClassANet",
           scale = 0.2,
           border.col = "black",
           border.lwd = 1)
tm_shape(permits_sf_ny)+
tm_dots(
  col = "black",
  size = 0.02,
  shape = 19,
  title = NA,
  legend.show = FALSE,
  legend.z = NA,
)
```
  