```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
```{r}
#install.packages("tidyverse")
library(tidyverse)
#install.packages("sf")
library(sf)
#install.packages("lubridate")
library(lubridate)
#install.packages("janitor")
library(janitor)
#install.packages("tmap")
library(tmap)
install.packages("zip")
library(zip)
```


```{r}
cc_members <- read_csv(
    "data/raw/city.council.database.xlsx - data.csv",
    col_types = cols(
        start.date = col_date("%m/%d/%Y"),
        end.date = col_date("%m/%d/%Y")
    )
)
permits <- read_csv("data/raw/HousingDB_post2010_inactive_included.csv")
```

Drop permits prior to 2014 when new districts first came into effect
```{r}
post_2013_permits<- subset(permits, PermitYear >= 2014)

permits_joined <- post_2013_permits %>%
    filter(DateFiled >= "2010-01-01") %>% # 65,100
    left_join(cc_members, by = c("CouncilDst" = "district")) %>%
    filter(DateFiled %within% interval(start.date, end.date)) # 65,100

get_dupes(permits_joined) # No duplicate combinations found (using all cols)
```

